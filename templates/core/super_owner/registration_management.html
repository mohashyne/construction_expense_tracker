{% extends 'super_owner_base.html' %}
{% load static %}

{% block title %}Registration Management - Construction Tracker{% endblock %}

{% block main_content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="professional-header-container">
                <div class="header-content">
                    <div class="header-text">
                        <h1 class="header-title">Registration Management</h1>
                        <p class="header-subtitle">Review and manage user registration requests</p>
                    </div>
                    <div class="header-actions">
                        <button type="button" class="action-btn success-btn" onclick="bulkApprove()" id="bulkApproveBtn" disabled>
                            <i class="fas fa-check-circle me-2"></i>Bulk Approve
                        </button>
                        <button type="button" class="action-btn danger-btn" onclick="bulkReject()" id="bulkRejectBtn" disabled>
                            <i class="fas fa-times-circle me-2"></i>Bulk Reject
                        </button>
                    </div>
                </div>
            </div>

            <!-- Statistics Cards -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="card bg-warning text-dark">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="me-3">
                                    <i class="fas fa-clock fa-2x opacity-75"></i>
                                </div>
                                <div>
                                    <h5 class="card-title mb-0">{{ pending_requests }}</h5>
                                    <p class="card-text mb-0">Pending Requests</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-success text-white">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="me-3">
                                    <i class="fas fa-check fa-2x opacity-75"></i>
                                </div>
                                <div>
                                    <h5 class="card-title mb-0">{{ approved_today }}</h5>
                                    <p class="card-text mb-0">Approved Today</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-primary text-white">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="me-3">
                                    <i class="fas fa-users fa-2x opacity-75"></i>
                                </div>
                                <div>
                                    <h5 class="card-title mb-0">{{ total_requests }}</h5>
                                    <p class="card-text mb-0">Total Requests</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-info text-white">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="me-3">
                                    <i class="fas fa-percentage fa-2x opacity-75"></i>
                                </div>
                                <div>
                                    <h5 class="card-title mb-0">
                                        {% widthratio approved_today total_requests 100 %}%
                                    </h5>
                                    <p class="card-text mb-0">Success Rate</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Filters and Search -->
            <div class="professional-filters-container">
                <div class="filters-content">
                    <form method="get" class="professional-filter-form">
                        <div class="filter-group">
                            <label for="status" class="filter-label">Status Filter</label>
                            <div class="input-wrapper">
                                <select class="professional-select" id="status" name="status">
                                    <option value="">All Statuses</option>
                                    {% for value, label in status_choices %}
                                    <option value="{{ value }}" {% if status_filter == value %}selected{% endif %}>
                                        {{ label }}
                                    </option>
                                    {% endfor %}
                                </select>
                                <div class="select-icon"><i class="fas fa-chevron-down"></i></div>
                            </div>
                        </div>
                        
                        <div class="filter-group search-group">
                            <label for="search" class="filter-label">Search</label>
                            <div class="search-input-wrapper">
                                <input type="text" class="professional-input search-input" id="search" name="search" 
                                       placeholder="Search by email, name, or company..." value="{{ search_query }}">
                                <div class="search-icon"><i class="fas fa-search"></i></div>
                            </div>
                        </div>
                        
                        <div class="filter-actions">
                            <button type="submit" class="filter-btn primary-filter-btn">
                                <i class="fas fa-search me-2"></i>Filter
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Registration Requests Table -->
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Registration Requests</h5>
                </div>
                <div class="card-body">
                    {% if page_obj %}
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="selectAll">
                                            <label class="form-check-label" for="selectAll"></label>
                                        </div>
                                    </th>
                                    <th>Date</th>
                                    <th>Type</th>
                                    <th>Applicant</th>
                                    <th>Email</th>
                                    <th>Company/Details</th>
                                    <th>Status</th>
                                    <th>Documents</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for request in page_obj %}
                                <tr>
                                    <td>
                                        <div class="form-check">
                                            <input class="form-check-input request-checkbox" type="checkbox" 
                                                   value="{{ request.id }}" data-request-id="{{ request.id }}">
                                        </div>
                                    </td>
                                    <td>
                                        <small class="text-muted">{{ request.created_at|date:"M d, Y" }}</small><br>
                                        <small class="text-muted">{{ request.created_at|time:"H:i" }}</small>
                                    </td>
                                    <td>
                                        <span class="badge {% if request.request_type == 'company_registration' %}bg-primary{% else %}bg-info{% endif %}">
                                            {{ request.get_request_type_display }}
                                        </span>
                                    </td>
                                    <td>
                                        <strong>{{ request.first_name }} {{ request.last_name }}</strong><br>
                                        {% if request.phone %}
                                        <small class="text-muted">
                                            <i class="fas fa-phone me-1"></i>{{ request.phone }}
                                        </small>
                                        {% endif %}
                                    </td>
                                    <td>
                                        <a href="mailto:{{ request.email }}" class="text-decoration-none">
                                            {{ request.email }}
                                        </a>
                                    </td>
                                    <td>
                                        {% if request.company_name %}
                                        <strong>{{ request.company_name }}</strong><br>
                                        {% if request.company_registration_number %}
                                        <small class="text-muted">Reg: {{ request.company_registration_number }}</small>
                                        {% endif %}
                                        {% else %}
                                        <span class="text-muted">Individual Account</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        <span class="badge {% if request.status == 'pending' %}bg-warning{% elif request.status == 'approved' %}bg-success{% elif request.status == 'rejected' %}bg-danger{% elif request.status == 'under_review' %}bg-info{% elif request.status == 'documents_required' %}bg-secondary{% else %}bg-dark{% endif %}">
                                            {{ request.get_status_display }}
                                        </span>
                                        {% if request.approved_by %}
                                        <br><small class="text-muted">by {{ request.approved_by.get_full_name|default:request.approved_by.username }}</small>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if request.documents.exists %}
                                        <span class="badge bg-primary">{{ request.documents.count }} docs</span>
                                        {% else %}
                                        <span class="text-muted">No docs</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        <div class="btn-group btn-group-sm" role="group">
                                            {% if request.status == 'pending' %}
                                            <button type="button" class="btn btn-success" 
                                                    onclick="processRequest('{{ request.id }}', 'approve')"
                                                    title="Approve">
                                                <i class="fas fa-check"></i>
                                            </button>
                                            <button type="button" class="btn btn-danger" 
                                                    onclick="processRequest('{{ request.id }}', 'reject')"
                                                    title="Reject">
                                                <i class="fas fa-times"></i>
                                            </button>
                                            <button type="button" class="btn btn-warning" 
                                                    onclick="processRequest('{{ request.id }}', 'request_docs')"
                                                    title="Request Documents">
                                                <i class="fas fa-file"></i>
                                            </button>
                                            {% endif %}
                                            <button type="button" class="btn btn-info" 
                                                    onclick="viewRequestDetails('{{ request.id }}')"
                                                    title="View Details">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination -->
                    {% if page_obj.has_other_pages %}
                    <nav aria-label="Registration requests pagination">
                        <ul class="pagination justify-content-center">
                            {% if page_obj.has_previous %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ page_obj.previous_page_number }}{% if status_filter %}&status={{ status_filter }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}">
                                    Previous
                                </a>
                            </li>
                            {% endif %}
                            
                            {% for num in page_obj.paginator.page_range %}
                            {% if page_obj.number == num %}
                            <li class="page-item active">
                                <span class="page-link">{{ num }}</span>
                            </li>
                            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ num }}{% if status_filter %}&status={{ status_filter }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}">
                                    {{ num }}
                                </a>
                            </li>
                            {% endif %}
                            {% endfor %}
                            
                            {% if page_obj.has_next %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ page_obj.next_page_number }}{% if status_filter %}&status={{ status_filter }}{% endif %}{% if search_query %}&search={{ search_query }}{% endif %}">
                                    Next
                                </a>
                            </li>
                            {% endif %}
                        </ul>
                    </nav>
                    {% endif %}

                    {% else %}
                    <div class="text-center py-5">
                        <i class="fas fa-inbox fa-4x text-muted mb-3"></i>
                        <h5>No Registration Requests</h5>
                        <p class="text-muted">
                            {% if status_filter or search_query %}
                            No requests match your current filter criteria.
                            {% else %}
                            Registration requests will appear here when users submit them.
                            {% endif %}
                        </p>
                        {% if status_filter or search_query %}
                        <a href="{% url 'core:super_owner_registrations' %}" class="btn btn-primary">
                            <i class="fas fa-refresh me-2"></i>Clear Filters
                        </a>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Process Request Modal -->
<div class="modal fade" id="processModal" tabindex="-1" aria-labelledby="processModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="processModalLabel">Process Request</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="processForm">
                    <input type="hidden" id="requestId" name="requestId">
                    <input type="hidden" id="action" name="action">
                    
                    <div id="reasonSection" style="display: none;">
                        <div class="mb-3">
                            <label for="reason" class="form-label">Reason/Message</label>
                            <textarea class="form-control" id="reason" name="reason" rows="3" 
                                      placeholder="Enter reason for rejection or message for document request..."></textarea>
                        </div>
                    </div>
                    
                    <div id="confirmSection">
                        <p id="confirmMessage"></p>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="submitProcessRequest()">
                    <span id="processButtonText">Process</span>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Request Details Modal -->
<div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="detailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="detailsModalLabel">Request Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="requestDetails">
                    <div class="text-center py-3">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Checkbox selection handling
document.getElementById('selectAll').addEventListener('change', function() {
    const checkboxes = document.querySelectorAll('.request-checkbox');
    checkboxes.forEach(checkbox => {
        checkbox.checked = this.checked;
    });
    updateBulkButtons();
});

document.addEventListener('change', function(e) {
    if (e.target.classList.contains('request-checkbox')) {
        updateBulkButtons();
    }
});

function updateBulkButtons() {
    const checkedBoxes = document.querySelectorAll('.request-checkbox:checked');
    const bulkApproveBtn = document.getElementById('bulkApproveBtn');
    const bulkRejectBtn = document.getElementById('bulkRejectBtn');
    
    if (checkedBoxes.length > 0) {
        bulkApproveBtn.disabled = false;
        bulkRejectBtn.disabled = false;
    } else {
        bulkApproveBtn.disabled = true;
        bulkRejectBtn.disabled = true;
    }
}

function processRequest(requestId, action) {
    document.getElementById('requestId').value = requestId;
    document.getElementById('action').value = action;
    
    const reasonSection = document.getElementById('reasonSection');
    const confirmMessage = document.getElementById('confirmMessage');
    const processButtonText = document.getElementById('processButtonText');
    
    if (action === 'approve') {
        reasonSection.style.display = 'none';
        confirmMessage.textContent = 'Are you sure you want to approve this registration request?';
        processButtonText.textContent = 'Approve';
    } else if (action === 'reject') {
        reasonSection.style.display = 'block';
        confirmMessage.textContent = 'Please provide a reason for rejection:';
        processButtonText.textContent = 'Reject';
    } else if (action === 'request_docs') {
        reasonSection.style.display = 'block';
        document.getElementById('reason').placeholder = 'Specify what additional documents are required...';
        confirmMessage.textContent = 'Request additional documents:';
        processButtonText.textContent = 'Request Documents';
    }
    
    const modal = new bootstrap.Modal(document.getElementById('processModal'));
    modal.show();
}

function submitProcessRequest() {
    const requestId = document.getElementById('requestId').value;
    const action = document.getElementById('action').value;
    const reason = document.getElementById('reason').value;
    
    fetch(`{% url 'core:process_registration_request' '00000000-0000-0000-0000-000000000000' %}`.replace('00000000-0000-0000-0000-000000000000', requestId), {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'X-CSRFToken': getCsrfToken(),
        },
        body: new URLSearchParams({
            'action': action,
            'reason': reason
        })
    })
    .then(response => response.json())
    .then(data => {
        const modal = bootstrap.Modal.getInstance(document.getElementById('processModal'));
        modal.hide();
        
        if (data.success) {
            showAlert('success', data.message);
            setTimeout(() => location.reload(), 1500);
        } else {
            showAlert('danger', data.error || 'Process failed');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showAlert('danger', 'Network error occurred');
    });
}

function bulkApprove() {
    bulkProcess('approve');
}

function bulkReject() {
    bulkProcess('reject');
}

function bulkProcess(action) {
    const checkedBoxes = document.querySelectorAll('.request-checkbox:checked');
    const requestIds = Array.from(checkedBoxes).map(cb => cb.value);
    
    if (requestIds.length === 0) {
        showAlert('warning', 'Please select requests to process');
        return;
    }
    
    const actionText = action === 'approve' ? 'approve' : 'reject';
    if (!confirm(`Are you sure you want to ${actionText} ${requestIds.length} selected requests?`)) {
        return;
    }
    
    fetch(`{% url 'core:bulk_process_requests' %}`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': getCsrfToken(),
        },
        body: JSON.stringify({
            'action': action,
            'request_ids': requestIds,
            'reason': action === 'reject' ? prompt('Reason for rejection (optional):') || '' : ''
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showAlert('success', data.message);
            setTimeout(() => location.reload(), 1500);
        } else {
            showAlert('danger', data.error || 'Bulk process failed');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showAlert('danger', 'Network error occurred');
    });
}

function viewRequestDetails(requestId) {
    const modal = new bootstrap.Modal(document.getElementById('detailsModal'));
    modal.show();
    
    // Load request details (you can implement this based on your needs)
    document.getElementById('requestDetails').innerHTML = `
        <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>
            Request details for ID: ${requestId}
            <br><br>
            This would show detailed information about the registration request including:
            <ul class="mt-2 mb-0">
                <li>Full applicant information</li>
                <li>Uploaded documents</li>
                <li>Request history and status changes</li>
                <li>Contact information</li>
            </ul>
        </div>
    `;
}

function showAlert(type, message) {
    const alertDiv = document.createElement('div');
    alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
    alertDiv.style.top = '20px';
    alertDiv.style.right = '20px';
    alertDiv.style.zIndex = '9999';
    alertDiv.style.minWidth = '300px';
    alertDiv.innerHTML = `
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    document.body.appendChild(alertDiv);
    
    setTimeout(() => {
        if (alertDiv.parentNode) {
            alertDiv.parentNode.removeChild(alertDiv);
        }
    }, 5000);
}

function getCsrfToken() {
    return document.querySelector('[name=csrfmiddlewaretoken]')?.value || 
           document.querySelector('meta[name="csrf-token"]')?.getAttribute('content') ||
           '{{ csrf_token }}';
}
</script>

<style>
/* Professional Header Styling */
.professional-header-container {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    padding: 2rem;
    margin-bottom: 2rem;
    border: 1px solid #e5e7eb;
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1.5rem;
}

.header-title {
    font-size: 1.875rem;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 0.5rem;
    font-family: 'Space Grotesk', sans-serif;
}

.header-subtitle {
    font-size: 1rem;
    color: #64748b;
    margin: 0;
    font-weight: 500;
}

.header-actions {
    display: flex;
    gap: 1rem;
    align-items: center;
    justify-content: space-around;
    flex-wrap: wrap;
}

.action-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.875rem 1.5rem;
    border: none;
    border-radius: 8px;
    font-size: 0.95rem;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.2s ease;
    cursor: pointer;
    min-width: 140px;
    gap: 0.5rem;
}

.success-btn {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    box-shadow: 0 4px 6px -1px rgba(16, 185, 129, 0.3);
}

.success-btn:hover:not(:disabled) {
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    transform: translateY(-1px);
    box-shadow: 0 6px 10px -1px rgba(16, 185, 129, 0.4);
}

.danger-btn {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: white;
    box-shadow: 0 4px 6px -1px rgba(239, 68, 68, 0.3);
}

.danger-btn:hover:not(:disabled) {
    background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
    transform: translateY(-1px);
    box-shadow: 0 6px 10px -1px rgba(239, 68, 68, 0.4);
}

.action-btn:disabled {
    background: #e5e7eb;
    color: #9ca3af;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

/* Professional Filters Styling */
.professional-filters-container {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    margin-bottom: 2rem;
    border: 1px solid #e5e7eb;
    overflow: hidden;
}

.filters-content {
    padding: 1.5rem;
}

.professional-filter-form {
    display: flex;
    align-items: end;
    gap: 1.5rem;
    flex-wrap: wrap;
    justify-content: space-around;
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    flex: 1;
    min-width: 200px;
}

.search-group {
    flex: 2;
    min-width: 300px;
}

.filter-label {
    font-size: 0.875rem;
    font-weight: 600;
    color: #374151;
    margin-bottom: 0.5rem;
}

.input-wrapper, .search-input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
}

.professional-select, .professional-input {
    width: 100%;
    padding: 0.875rem 3rem 0.875rem 1rem;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    font-size: 0.95rem;
    color: #1f2937;
    background: #ffffff;
    transition: all 0.2s ease;
    outline: none;
    appearance: none;
}

.professional-select:focus, .professional-input:focus {
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.select-icon, .search-icon {
    position: absolute;
    right: 1rem;
    color: #9ca3af;
    pointer-events: none;
    font-size: 0.875rem;
}

.search-input {
    padding-right: 3rem;
}

.filter-actions {
    display: flex;
    align-items: center;
    justify-content: center;
}

.filter-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.875rem 2rem;
    border: none;
    border-radius: 8px;
    font-size: 0.95rem;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.2s ease;
    cursor: pointer;
    min-width: 120px;
    gap: 0.5rem;
}

.primary-filter-btn {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    color: white;
    box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.3);
}

.primary-filter-btn:hover {
    background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
    transform: translateY(-1px);
    box-shadow: 0 6px 10px -1px rgba(59, 130, 246, 0.4);
}

/* Enhanced Table and Card Styling */
.table th {
    border-top: none;
    font-weight: 600;
    font-size: 0.875rem;
    color: #495057;
    background: #f8f9fa;
    padding: 1rem;
}

.table td {
    padding: 1rem;
    vertical-align: middle;
}

.btn-group .btn {
    border-radius: 0.375rem !important;
    margin-right: 2px;
}

.btn-group .btn:not(:last-child) {
    border-top-right-radius: 0 !important;
    border-bottom-right-radius: 0 !important;
}

.btn-group .btn:not(:first-child) {
    border-top-left-radius: 0 !important;
    border-bottom-left-radius: 0 !important;
    margin-right: 0;
}

.badge {
    font-size: 0.75rem;
    padding: 0.4rem 0.8rem;
    border-radius: 6px;
}

.card {
    border: none;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    border-radius: 12px;
    overflow: hidden;
}

.card-header {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-bottom: 1px solid #dee2e6;
    font-weight: 600;
    padding: 1.25rem 1.5rem;
}

.card-body {
    padding: 1.5rem;
}

.form-check-input:focus {
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
}

.pagination .page-link {
    color: #0d6efd;
    border-radius: 6px;
    margin: 0 2px;
    border: 1px solid #dee2e6;
}

.pagination .page-item.active .page-link {
    background-color: #0d6efd;
    border-color: #0d6efd;
    box-shadow: 0 2px 4px rgba(13, 110, 253, 0.3);
}

.pagination .page-link:hover {
    background-color: #e7f1ff;
    border-color: #b3d9ff;
}

/* Statistics Cards Enhancement */
.card.bg-warning, .card.bg-success, .card.bg-primary, .card.bg-info {
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.15);
    transition: all 0.3s ease;
}

.card.bg-warning:hover, .card.bg-success:hover, .card.bg-primary:hover, .card.bg-info:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 15px -3px rgba(0, 0, 0, 0.2);
}

/* Responsive Design */
@media (max-width: 768px) {
    .professional-header-container {
        padding: 1.5rem;
    }
    
    .header-content {
        flex-direction: column;
        text-align: center;
    }
    
    .header-actions {
        justify-content: center;
        width: 100%;
    }
    
    .action-btn {
        min-width: 120px;
        padding: 0.75rem 1rem;
    }
    
    .professional-filter-form {
        flex-direction: column;
        align-items: stretch;
    }
    
    .filter-group, .search-group {
        min-width: unset;
    }
    
    .filter-actions {
        margin-top: 0.5rem;
    }
    
    .header-title {
        font-size: 1.5rem;
    }
}

@media (max-width: 480px) {
    .header-actions {
        flex-direction: column;
        width: 100%;
    }
    
    .action-btn {
        width: 100%;
        min-width: unset;
    }
}
</style>
{% endblock %}
